---
{"dg-publish":true,"permalink":"/anno-2/sistemi-operativi/codici-in-c/esercizi/7-processi-e-potenza-di-un-numero/"}
---

>[!tip] consegna
>Scrivere un programma C che crea un processo figlio:
> 
> - Il padre legge un numero casuale e lo invia al figlio attraverso una pipe.
> - Il figlio fa il quadrato del numero e lo invia nuovamente al padre solo se il quadrato è pari, attraverso la pipe.
> - Il padre legge il numero e lo stampa.

```c
#include<stdio.h>

#include<stdlib.h>

#include<unistd.h>

#include<fcntl.h>

#include<time.h>

#include<math.h>

#include<signal.h>

int main(int argc,char** argv)

{

    pid_t p1;

    int fd[2],fd1[2];

    pipe(fd);

    pipe(fd1);

    srand(time(NULL));

    p1=fork();

    if(p1==-1) exit(1);

    if(p1>0){

         close(fd1[1]);

        close(fd[0]);

    while(1)

        {

        int num=rand();

        write(fd[1],&num,sizeof(int));

        if ((read(fd1[0],&num,sizeof(int)))> 0)

        {

        fflush(stdout);

        printf("%d",num);

        kill(p1,SIGINT);

        exit(0);

        }

    }

    }

    if(p1==0)

    {

        close(fd[1]);

        close(fd1[0]);

        while(1)

        {

            int num=0;

            read(fd[0],&num,sizeof(int));

            if((num*num)%2==0)

            {

                num=num*num;

                write(fd1[1],&num,sizeof(int));

            }

            sleep(1);

        }

    }

    return 0;

}
```