---
{"dg-publish":true,"permalink":"/anno-2/sistemi-operativi/codici-in-c/esercizi/3-processi-che-si-passano-numeri/"}
---

>[!tip] consegna
> Un processo padre genera due processi figli:
> 
> - Il primo processo figlio invia al padre un numero casuale da `0` a `100`.
> - Il padre legge questo numero, lo moltiplica per un `k` casuale e lo manda al secondo figlio.
> - Il secondo figlio legge il numero inviato dal padre e lo stampa a video.

```c
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<sys/types.h>
#include<time.h>
int main(int *argc,char **argv)
{
    srand(time(NULL));
    int fd[2];
    pipe(fd);
    if(fd<0) exit(1);
    pid_t p1;
    pid_t p2;
    int numero=0;
    p1=fork();
    if(p1<0) exit(1);
    if(p1==0)
    {
        close(fd[0]);
        numero=rand()%101;
        if((write(fd[1],&numero,sizeof(int)))<0)
        {
            fflush(stdout);
            printf("non ha scritto\n");
        }

        fflush(stdout);
        printf("processo 1 ha inviato il coso %d \n",numero);
        exit(0);
    }
    if(p1>0)
    {
        read(fd[0],&numero,sizeof(int));
        int k=rand()%100;
        int result=(k*numero);
        printf("sono il padre e faccio %d x %d = %d\n",k,numero,result);
        write(fd[1],&result,sizeof(int));
    }
    p2=fork();
    if(p2<0) exit(1);
    if(p2==0)
    {
        close(fd[1]);
        fflush(stdout);
        read(fd[0],&numero,sizeof(int));
        printf("ecco il numero %d \n",numero);
        exit(0);
    }
    return 0;
}

```
