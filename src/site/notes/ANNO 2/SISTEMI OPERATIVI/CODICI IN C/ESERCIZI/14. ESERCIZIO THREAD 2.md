---
{"dg-publish":true,"permalink":"/anno-2/sistemi-operativi/codici-in-c/esercizi/14-esercizio-thread-2/"}
---

>[!tip] consegna
>
> Scrivere un programma in C che, data una stringa di `N` caratteri, crea `N/2` thread che stampano ciascuno un carattere della stringa in maiuscolo. Usare semafori binari o mutex.

```c
#include<stdio.h>

#include<unistd.h>

#include<stdlib.h>

#include<stdio.h>

#include<pthread.h>

#include<string.h>

#include<ctype.h>

int counter=0;

pthread_mutex_t mutex;

void * thread(void * stringa)

{

    char *stringa1=(char *) stringa;

    pthread_mutex_lock(&mutex);

    printf("%c \n",toupper(stringa1[counter]));

    counter++;

    pthread_mutex_unlock(&mutex);

    pthread_exit(NULL);

}

int main(int argc,char **argv)

{

    pthread_t t1;

    pthread_mutex_init(&mutex,NULL);

    int n=strlen(argv[1]);

    for(int i=0;i<(n/2);i++)

    {

        pthread_create(&t1,NULL,thread,argv[1]);

    }

    for(int i=0;i<(n/2);i++)

    {

        pthread_join(t1,NULL);

    }

    pthread_mutex_destroy(&mutex);

    return 0;

}
```
