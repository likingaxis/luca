---
{"dg-publish":true,"permalink":"/anno-2/sistemi-operativi/codici-in-c/esercizi/6-somma-multipli-3-e-2/"}
---

>[!tip] consegna
> Generare due processi figli che comunicano con il padre:
> 
> - Uno dei processi genera numeri casuali `[0-50]` ed invia al padre solo i numeri multipli di `3`.
> - L’altro processo genera numeri casuali `[51-100]` ed invia al padre solo i numeri multipli di `2`.
> - Il padre stampa i numeri ricevuti ed esegue la loro somma quando la somma > `130`.

```c
#include<stdio.h>

#include<stdlib.h>

#include<time.h>

#include<unistd.h>

#include<fcntl.h>

int main(int argc,char **argv)

{

    pid_t p1,p2;

    srand(time(NULL));

    int fd[2];

    pipe(fd);

    p1=fork();

    if (p1==-1) exit(1);

    if(p1==0)

    {

        close(fd[0]);

        int num=0;

        while(1)

        {

            num=rand()%51;

            if(num%3==0){

            fflush(stdout);

            printf("numero trovato p1 %d \n",num);

            write(fd[1],&num,sizeof(int));

             sleep(1);

            }

        }

    }

    if(p1>0){

    p2=fork();

    if(p2==-1) exit(1);

    if(p2==0)

    {

        close(fd[0]);

        int num=0;

        while(1)

        {

            num=51+rand()%50;

            if(num%2==0){

            fflush(stdout);

            printf("numero trovato p2 %d \n",num);

            write(fd[1],&num,sizeof(int));

              sleep(1);

            }

        }        

    }

    }

if(p1>0 && p2>0)

{

    while(1)

    {

    close(fd[1]);

    int num1=0;

    int num2=0;

    read(fd[0],&num1,sizeof(int));

    read(fd[0],&num2,sizeof(int));

    if(num1+num2>130)

    {

        fflush(stdout);

        printf("\n %d + %d >130 e fa %d \n",num1,num2,num1+num2);

        exit(0);

    }

    sleep(1);

    }

}

return 0;

}
```