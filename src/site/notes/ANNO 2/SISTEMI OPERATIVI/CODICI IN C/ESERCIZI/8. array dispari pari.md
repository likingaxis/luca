---
{"dg-publish":true,"permalink":"/anno-2/sistemi-operativi/codici-in-c/esercizi/8-array-dispari-pari/"}
---

>[!tip] consegna
> Scrivere un programma C che svolge le seguenti richieste:
> 
> - Un processo padre genera due processi figli. Ciascun processo inizializza un proprio array di `N` interi.
> - Il primo processo invia al processo padre solo i numeri in posizioni pari, e il secondo processo solo i numeri in posizioni dispari.
> - Il padre riceve questi numeri e li scrive in un array di `N` interi, mettendo in posizioni pari i numeri ricevuti dal primo figlio, e in posizioni dispari i numeri ricevuti dal secondo figlio.
> - Il padre stampa l’array e calcola il max e il min.

```c
#include <stdio.h>

#include<stdlib.h>

#include <fcntl.h>

#include<math.h>

#include<time.h>

#include<unistd.h>

  

int max(int *arr,int l)

{

    int num=arr[0];

    for(int i=0;i<l;i++)

    {

       if(arr[i]>num) num=arr[i];

    }

    return num;

}

int min(int *arr,int l)

{

    int num=arr[0];

    for(int i=0;i<l;i++)

    {

       if(arr[i]<num) num=arr[i];

    }

    return num;

}

int main(int argc, char **argv)

{

    int N=atoi(argv[1]);

    int fd1[2],fd2[2];

    srand(time(NULL));

    pipe(fd1);

    pipe(fd2);

    pid_t p1;

    pid_t p2;

    p1=fork();

    if(p1==-1) exit(1);

    if(p1==0)

    {

        close(fd1[0]);

        close(fd2[0]);

        close(fd2[1]);

        int arr[N];

        for(int i=0;i<N;i++)

        {

            arr[i]=rand()%101;

        }

        for(int i=0;i<N;i=i+2)

        {

            write(fd1[1],&arr[i],sizeof(int));

            fflush(stdout);

            printf("sto inviando i pari ... \n");

        }

        exit(0);

    }

    if (p1>0)

    {

        p2=fork();

        if(p2==-1) exit(1);

        if (p2==0)

        {

            close(fd1[0]);

            close(fd1[1]);

            close(fd2[0]);

            int arr[N];

            for(int i=0;i<N;i++)

            {

                arr[i]=rand();

            }

            for(int i=1;i<N;i=i+2)

            {

                write(fd2[1],&arr[i],sizeof(int));

                fflush(stdout);

                printf("sto inviando i dispari ... \n");

            }

            exit(0);

        }

    }

    if (p1>0 && p2>0)

    {

        close(fd1[1]);

        close(fd2[1]);

        int base=0;

        int arr[N];

        for(int i=0;i<N;i++)

        {

            if(i%2==0)

            {

                read(fd1[0],&base,sizeof(int));

                arr[i]=base;

            }        

            else

            {

                read(fd2[0],&base,sizeof(int));

            }  

        }

        for(int i=0;i<N;i++)

        {

            fflush(stdout);

            printf("ecco l'array %d \n",arr[i]);

  

        }

        int l=sizeof(arr)/sizeof(int);

        fflush(stdout);

        printf("il max è... %d \n", max(arr,l));

        printf("il min è %d \n", min(arr,l));

    }

}
```
