---
{"dg-publish":true,"permalink":"/anno-2/sistemi-operativi/codici-in-c/esercizi/12-max-e-min/"}
---

>[!tip] consegna
> 
> 
> Scrivere un programma in C con tre thread che operano su due array di dimensione `N` 
> inizialmente a `0`:
> 
> - Il primo thread scrive in un array `A` numeri casuali tra `1` e `150`, in posizioni randomiche.
> - Il secondo thread scrive in un array `B` numeri casuali tra `150` e `300`, in posizioni randomiche.
> - Il terzo thread calcola:
>     - Il massimo e il minimo in `A` e `B`.
>     - `max{max(A), max(B)}` e `min{min(A), min(B)}`.


```c
#include<stdio.h>

#include<stdlib.h>

#include<unistd.h>

#include<time.h>

#include<pthread.h>

#define N 10

int max(int arr[N])

{

    int max=arr[0];

    for(int i=0;i<N;i++)

    {

        if(arr[i]>max) max=arr[i];

    }

    return max;

}

int min(int arr[N])

{

    int min=arr[0];

    for(int i=0;i<N;i++)

    {

        if(arr[i]<min) min=arr[i];

    }

    return min;

}

  

pthread_mutex_t mutex1;

pthread_mutex_t mutex2;

int A[N]={0};

int B[N]={0};

void * thread1()

{

    pthread_mutex_lock(&mutex1);

    srand(time(NULL));

    printf("sono il t1 e sto generando i numeri \n");

    for(int i=0;i<N;i++)

    {

        A[rand()%N]=1+rand()%100;

    }

    printf("sono il t1 e ho finito di generare i numeri \n");

    pthread_mutex_unlock(&mutex1);

    pthread_exit(NULL);

}

void *thread2()

{

    pthread_mutex_lock(&mutex2);

    srand(time(NULL));

    printf("sono il t2 e sto generando i numeri \n");

    for(int i=0;i<N;i++)

    {

        B[rand()%N]=150+rand()%151;

    }

    printf("sono il t2 e ho finito di generare i numeri \n");

    pthread_mutex_unlock(&mutex2);

    pthread_exit(NULL);

}

void *thread3()

{

    pthread_mutex_lock(&mutex1);

    pthread_mutex_lock(&mutex2);

    int a1=max(A);

    int a2=min(A);

    int b1=max(B);

    int b2=min(B);

    if(a1>b1) printf("il max dei max è %d \n",a1);

    else printf("il max dei max è %d \n",b1);

    if(a2<b2) printf("il min dei min è %d \n",a2);

    else printf("il min dei min è %d \n",b2);

    pthread_mutex_unlock(&mutex1);

    pthread_mutex_unlock(&mutex2);

    pthread_exit(NULL);

}

int main(int argc, char **argv)

{

    pthread_t t1,t2,t3;

    pthread_mutex_init(&mutex1,NULL);

    pthread_mutex_init(&mutex2,NULL);

    pthread_create(&t1,NULL,thread1,NULL);

    pthread_create(&t2,NULL,thread2,NULL);

    pthread_create(&t3,NULL,thread3,NULL);

    pthread_join(t1,NULL);

    pthread_join(t2,NULL);

    pthread_join(t3,NULL);

    pthread_mutex_destroy(&mutex1);

    pthread_mutex_destroy(&mutex2);

    return 0;

}
```